<!DOCTYPE html PUBLIC "Uncompressed source: https://github.com/rmurphey"><html id="rmurphey-com"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Using object literals for flow control and settings</title><meta name="description" content="Using object literals for flow control and settings"/><meta name="HandheldFriendly" content="True"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="twitter:description" content="I got an email the other day from someone reading through jQuery Fundamentals -- they&#39;d come across the section
about patterns for performance and compression, which is based on a
presentation by Paul Irish gave back at the 2009 jQuery
Conference in Boston.
In that section, there&#39;s a bit about alternative patterns for flow control --
that is, deciding what a program should do next. We&#39;re all familiar with the
standard if statement:
{% codeblock lang:javascript %}
function isAnimal(thing) {
  if (thing === &#39;dog&#39; || thing === &#39;cat&#39;) {
    console.log(&quot;yes!&quot;);
  } else {
    console.log(&quot;no&quot;);
  }
}
{% endcodeblock %}"><meta name="twitter:creator" content="@rmurphey"/><meta name="twitter:title" content="Using object literals for flow control and settings"/><meta name="twitter:site" content="@rmurphey"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/favicon.ico"/><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic,300,800|Source+Code+Pro:400,700,300" rel="stylesheet" type="text/css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/default.min.css"/><style>@media (max-width: 800px) {
  body {
    margin: 5%;
  }
}

@media (min-width: 800px) {
  body {
    margin: 5% 20%;
    font-size: 120%;
  }
}

img.main {
  width: 100%;
}

body {
  font-family: "Open Sans";
  font-weight: 300;
}

p, li {
  line-height: 1.8em;
}

em {
  font-style: italic;
}

strong {
  font-weight: 700;
}

a:hover {
  color: #fb6b70;
}

a:visited {
  color: #9a3337;
}

a {
  color: #d9272e;
  text-decoration: none;
}

pre, code {
  font-family: "Source Code Pro", monospace;
  font-weight: 400;
  font-size: 90%;
}

pre strong, code strong {
  font-weight: 700;
}

h1.banner {
  font-size: 220%;
}

h1.banner span {
  font-weight: 300;
  text-transform: lowercase;
}

h1.banner a {
  color: inherit;
}

.search input[type=submit] {
  margin-left: 1em;
}

.post-content p.date {
  font-style: italic;
}

.post-content span.edit {
  font-size: 80%;
  color: #ccc;
}

.post-content span.edit a {
  color: inherit;
}

.archives ul {
  list-style-type: none;
  text-indent: 0;
  padding: 0;
}

.archives li {
  display: inline-block;
  margin-right: 1em;
}
</style><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-143877-10', 'auto');
ga('send', 'pageview');
</script></head><body id="blog-object-literals-page"><h1 class="banner title"><a href="/">rmurphey&nbsp;</a><span><a href="/">Adventures in JavaScript</a></span></h1><nav class="main-nav clearfix subpanel"><form action="https://google.com/search" class="search"><input type="hidden" name="q" value="site:rmurphey.com"/><input type="text" name="q" placeholder="Search for..."/><input type="submit" value="Search"/></form><ul class="post-nav"><li class="home"><a href="/">Home</a></li><li class="next"><a href="/blog/2012/11/14/this-is-the-cup-of-coffee" title="This is the Cup of Coffee">Next</a></li><li class="prev"><a href="/blog/2011/07/06/lessons-from-a-rewrite" title="Lessons From a Rewrite">Previous</a></li></ul></nav><main role="main" class="content"><article class="post"><h1 class="title"><a href="/2011/07/24/object-literals" rel="bookmark" title="Permanent Link: Using object literals for flow control and settings">Using object literals for flow control and settings</a></h1><div class="post-content"><p class="date">24 Jul 2011 <span class="edit"> <a href="/2011/07/24/object-literals/edit">edit</a></span></p><p>I got an email the other day from someone reading through <a href="http://jqfundamentals.com">jQuery Fundamentals</a> -- they&#39;d come across the section
about patterns for performance and compression, which is based on a
presentation by <a href="http://paulirish.com">Paul Irish</a> gave back at the 2009 jQuery
Conference in Boston.</p>
<p>In that section, there&#39;s a bit about alternative patterns for flow control --
that is, deciding what a program should do next. We&#39;re all familiar with the
standard if statement:</p>
<p>{% codeblock lang:javascript %}
function isAnimal(thing) {
  if (thing === &#39;dog&#39; || thing === &#39;cat&#39;) {
    console.log(&quot;yes!&quot;);
  } else {
    console.log(&quot;no&quot;);
  }
}
{% endcodeblock %}</p>
<p>What stumped the person who emailed me, though, was when the same logic as we
see above was written like this:</p>
<p>{% codeblock lang:javascript %}
function isAnimal(thing) {
  if (({ cat : 1, dog : 1 })[ thing ]) {
    console.log(&quot;yes!&quot;);
  } else {
    console.log(&quot;no&quot;);
  }
}
{% endcodeblock %}</p>
<p>What&#39;s happening here is that we&#39;re using a throwaway object literal to express
the conditions under which we will say a <code>thing</code> is an animal. We could have
stored the object in a variable first:</p>
<p>{% codeblock lang:javascript %}
function isAnimal(thing) {
  var animals = {
    cat : 1,
    dog : 1
  };</p>
<p>  if (animals[ thing ]) {
    console.log(&quot;yes!&quot;);
  } else {
    console.log(&quot;no&quot;);
  }
}
{% endcodeblock %}</p>
<p>However, that variable&#39;s only purpose would be to provide this one lookup, so
it can be argued that the version that doesn&#39;t bother setting the variable is
more economical. Reasonable people can probably disagree about whether this
economy of bytes is a good tradeoff for readability -- something like this is
perfectly readable to a seasoned developer, but potentially puzzling otherwise
-- but it&#39;s an interesting example of how we can use literals in JavaScript
without bothering to store a value in a variable.</p>
<p>The pattern works with an array, too:</p>
<p>{% codeblock lang:javascript %}
function animalByIndex(index) {
  return [ &#39;cat&#39;, &#39;dog&#39; ][ index ];
}
{% endcodeblock %}</p>
<p>It&#39;s also useful for looking up values generally, which is how I find myself
using it most often these days in my work with <a href="http://toura.com">Toura</a>, where
we routinely branch our code depending on the form factor of the device we&#39;re
targeting:</p>
<p>{% codeblock lang:javascript %}
function getBlingLevel(device) {
  return ({
    phone : 100,
    tablet : 200
  })[ device.type ];
}
{% endcodeblock %}</p>
<p>As an added benefit, constructs that use this pattern will return the
conveniently falsy <code>undefined</code> if you try to look up a value that doesn&#39;t have
a corresponding property in the object literal.</p>
<p>A great way to come across techniques like this is to read the source code of
your favorite library (and other libraries too). Unfortunately, once
discovered, these patterns can be difficult to decipher, even if you have
pretty good Google fu. Just in case your neighborhood blogger isn&#39;t available,
IRC is alive and well in 2011, and it&#39;s an excellent place to get access to
smart folks eager to take the time to explain.</p></div><div class="comments"><h2>Comments</h2><div id="disqus_thread"></div><script>(function() { 
var d = document, s = d.createElement('script');

s.src = '//rmurphey.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();</script></div></article></main><footer class="site-footer clearfix flex subpanel"><div class="flex-item projects"><h2>Projects</h2><ul><li><a href="https://github.com/rmurphey/js-assessment">js-assessment</a></li><li><a href="http://ttlpodcast.com/">TTL Podcast</a></li><li><a href="http://yayquery.com/">yayQuery</a></li></ul></div><div class="flex-item links"><h2>Links</h2><ul><li><a href="/about.html">About</a></li><li><a href="/feed.xml">RSS feed</a></li><li><a href="https://github.com/rmurphey">GitHub</a></li><li><a href="https://twitter.com/rmurphey">Twitter</a></li><li><a href="https://speakerdeck.com/rmurphey">Speaker Deck</a></li></ul></div><div class="flex-item archives"><h2>Archives</h2><ul><li><a href="/archives">All years</a></li><li><a href="/2015">2015</a></li><li><a href="/2014">2014</a></li><li><a href="/2013">2013</a></li><li><a href="/2012">2012</a></li><li><a href="/2011">2011</a></li><li><a href="/2010">2010</a></li><li><a href="/2009">2009</a></li><li><a href="/2008">2008</a></li><li><a href="/2007">2007</a></li></ul></div><div class="flex-item license"><h2>License</h2><p class="vcard">Copyright © 2015 <a class="url fn" href="http://rmurphey.com">Rebecca Murphey</a>.</p><p>All code and content for this blog is available <a href="https://github.com/rmurphey/rmurphey">on GitHub</a>.</p>
</div><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><!--|  
|  
|  Carved up by hand using Harp and a shit load of hacking ❤
|  
|  Also, this:
|  
|  
|  
|                        \_            /;              _.._
|                        `\~--.._     //'            ,(+=\\\\
|                         `//////\  \\/;'             /~ (\\\\
|                           ~/////\~\`)'             /;   ))))
|                               `~'  |              ((`~/((((\
|                               ;'_\'\             /'))   )))))
|                              /~/ '" "'     _.  /'/\_ /^\`((( \
|                             `\/'       _.-~/--/ (  =(   | ,  |
|                                     _/~\_)_}___/^\/~`\.__\|==|
|                                    /uUUU)        )        |  |
|                                   (   / |      _-=o|\__ /'/~ \
|                                   ' /'  |     /(((((\`\(  |~\/
|                                   /'    |   /' )))))"`\`\|/_/---.._,$$,
|                             .,ssS$$$Sss|._/_..-((('    )\)>>>      ~\$
|                          ,sS$$$$$$$$$$$|$$$$$$$  |/    //'~`o        `\
|                        ,$$$$$$$$$$$$$$|$$S$$$$'  (    /                \
|                      ,$$$$$$$$$$$$S$$|$$$$$$$'   |   /              ,s$$$
|                    s$$$$$S$$$$$$$$$S|$$$$$$$$    |  /              $$$$$$
|                  _~,$S""''     ``"S|$$S$$$$$"    (_,`\,          ,$$$$$$$;
|                /~ ,"'             / 'S$$$$$"      \_./|        s$$$$$$$$$$
|             (~'      _,  \==~~)  /     """         \  |       $$$$$$$$$$$$
|              (0\   /0/     \-' /'                   \ |  |  ,$$$$$$$$$$$$$,
|              `/'  '         _-~                     |= \_-\ $$$$$$$$$$$$$$s
|              (~~~)      _.-~_-   \             \  ,s|= |   `"$$$$$$$$$$$$$$$
|             ( `-'  )/>-~  _/-__   |            |,$$$|_/,      `"$$$$$$$$$$$$
|             /V^^^^V~/' _/~/~~  ~~-|            |$$$$$$$$         "$$$$$$$$$$,
|            /  (^^^^),/' /'        )           /S$$$$$$$;         ,$$$$$$$$$$$,
|          ,$$_  `~~~'.,/'         /     _-ss, /(/-(/-(/'        ,s$$$$$$$$$$$$$
|        ,s$$$$$ssSS$$$'         ,$'.s$$$$$$$$'                  (/-(/-(/-(/-(/'
|       S$$$$$$$$$$$$$$        ,$$$$$$$$$$$$$'
|      (/-(/-(/-(/-(/'      _s$$$$$$$$$$$$$$
|                          (/-(/-(/-(/-(/-'
|  
|  
|  
|      – Remy
|  
|  --></footer><!-- Env: production - static files--></body></html>